var h=(U,s,d)=>new Promise((f,r)=>{var c=t=>{try{m(d.next(t))}catch(g){r(g)}},k=t=>{try{m(d.throw(t))}catch(g){r(g)}},m=t=>t.done?f(t.value):Promise.resolve(t.value).then(c,k);m((d=d.apply(U,s)).next())});import{M as p}from"./motion-BFYU3wwN.js";import{d as z,a5 as D,p as P,x as N,r as _,g as $,o as F,h as o,b as l,u as e,z as y,$ as w,e as L,f as V,W as v,aE as S,aC as W}from"./index-C_zGcw4p.js";import{u as A}from"./rule-D-lzS7xM.js";import{u as R,I as G,K}from"./shield-keyhole-line-IHYTf2Ms.js";import{u as x}from"./hooks-9c3cory_.js";import{L as I}from"./lock-fill-Duq8gbHf.js";import{U as M}from"./user-3-fill-CZ8lIShd.js";const j={class:"w-full flex justify-between"},ee=z({__name:"LoginRegist",setup(U){const{t:s}=D(),d=P(!1),f=P(!1),r=N({username:"",phone:"",verifyCode:"",password:"",repeatPassword:""}),c=P(),{isDisabled:k,text:m}=R(),t=[{validator:(C,a,u)=>{a===""?u(new Error(y(w("login.purePassWordSureReg")))):r.password!==a?u(new Error(y(w("login.purePassWordDifferentReg")))):u()},trigger:"blur"}],g=C=>h(null,null,function*(){f.value=!0,C&&(yield C.validate(a=>{a?d.value?setTimeout(()=>{S(y(w("login.pureRegisterSuccess")),{type:"success"}),f.value=!1},2e3):(f.value=!1,S(y(w("login.pureTickPrivacy")),{type:"warning"})):f.value=!1}))});function B(){R().end(),W().SET_CURRENTPAGE(0)}return(C,a)=>{const u=_("el-input"),i=_("el-form-item"),b=_("el-button"),E=_("el-checkbox"),T=_("el-form");return F(),$(T,{ref_key:"ruleFormRef",ref:c,model:r,rules:e(A),size:"large"},{default:o(()=>[l(e(p),null,{default:o(()=>[l(i,{rules:[{required:!0,message:e(y)(e(w)("login.pureUsernameReg")),trigger:"blur"}],prop:"username"},{default:o(()=>[l(u,{modelValue:r.username,"onUpdate:modelValue":a[0]||(a[0]=n=>r.username=n),clearable:"",placeholder:e(s)("login.pureUsername"),"prefix-icon":e(x)(e(M))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1},8,["rules"])]),_:1}),l(e(p),{delay:100},{default:o(()=>[l(i,{prop:"phone"},{default:o(()=>[l(u,{modelValue:r.phone,"onUpdate:modelValue":a[1]||(a[1]=n=>r.phone=n),clearable:"",placeholder:e(s)("login.purePhone"),"prefix-icon":e(x)(e(G))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),l(e(p),{delay:150},{default:o(()=>[l(i,{prop:"verifyCode"},{default:o(()=>[L("div",j,[l(u,{modelValue:r.verifyCode,"onUpdate:modelValue":a[2]||(a[2]=n=>r.verifyCode=n),clearable:"",placeholder:e(s)("login.pureSmsVerifyCode"),"prefix-icon":e(x)(e(K))},null,8,["modelValue","placeholder","prefix-icon"]),l(b,{disabled:e(k),class:"ml-2!",onClick:a[3]||(a[3]=n=>e(R)().start(c.value,"phone"))},{default:o(()=>[V(v(e(m).length>0?e(m)+e(s)("login.pureInfo"):e(s)("login.pureGetVerifyCode")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}),l(e(p),{delay:200},{default:o(()=>[l(i,{prop:"password"},{default:o(()=>[l(u,{modelValue:r.password,"onUpdate:modelValue":a[4]||(a[4]=n=>r.password=n),clearable:"","show-password":"",placeholder:e(s)("login.purePassword"),"prefix-icon":e(x)(e(I))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),l(e(p),{delay:250},{default:o(()=>[l(i,{rules:t,prop:"repeatPassword"},{default:o(()=>[l(u,{modelValue:r.repeatPassword,"onUpdate:modelValue":a[5]||(a[5]=n=>r.repeatPassword=n),clearable:"","show-password":"",placeholder:e(s)("login.pureSure"),"prefix-icon":e(x)(e(I))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),l(e(p),{delay:300},{default:o(()=>[l(i,null,{default:o(()=>[l(E,{modelValue:d.value,"onUpdate:modelValue":a[6]||(a[6]=n=>d.value=n)},{default:o(()=>[V(v(e(s)("login.pureReadAccept")),1)]),_:1},8,["modelValue"]),l(b,{link:"",type:"primary"},{default:o(()=>[V(v(e(s)("login.purePrivacyPolicy")),1)]),_:1})]),_:1})]),_:1}),l(e(p),{delay:350},{default:o(()=>[l(i,null,{default:o(()=>[l(b,{class:"w-full",size:"default",type:"primary",loading:f.value,onClick:a[7]||(a[7]=n=>g(c.value))},{default:o(()=>[V(v(e(s)("login.pureDefinite")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),l(e(p),{delay:400},{default:o(()=>[l(i,null,{default:o(()=>[l(b,{class:"w-full",size:"default",onClick:B},{default:o(()=>[V(v(e(s)("login.pureBack")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{ee as default};
